<html>
  <head>
    <link rel='stylesheet' href='highlightjs/styles/default.css'>
    <link rel='stylesheet' href='fontawesome/css/all.css'>
     <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
            
    <script src='d3/d3.js'></script>
    <script src='highlightjs/highlight.pack.js'></script>
    <script src='sw64asm.js'></script>
    <script>
     hljs.initHighlightingOnLoad();
     hljs.initHighlighting();
     hljs.registerLanguage('sw64asm', sw64asm);
    </script>
    <script src='swpf.js'></script>
    <style>
     .focused {
	 background: #9bf;
     }
     .cnt-bar {
	 background: #ef9;
	 top: 4px;
	 bottom: 4px;
	 border: #777 1px solid;
	 border-radius: 4px;
	 height: 14px;
	 display: inline-block;
	 margin-left: 10px;
     }
     .code-cell {
     }
     .cnt-cell{
	 position: relative;
     }
     .dir-li>ul{
	 display: none;
     }
     .dir-li.expanded>ul{
	 display: block;
     }
     .swpfview{
	 display: none;
     }
     #codecnt{
	 position:absolute;
	 left: 10px;
	 right: 49%;
	 overflow: scroll;
	 top: 100px;
	 bottom: 10px;
     }
     #asmcnt{
	 position:absolute;
	 left: 51%;
	 right: 10px;
	 overflow: scroll;
	 top: 100px;
	 bottom: 10px;
     }
     .pre-table {
	 white-space: pre;
	 user-select: none;
     }
     .pre-table, th {
	 position: sticky;
	 top: 0px;
	 background: #FFF;
	 z-index: 2;
	 align: center;
     }
     .pre-table, td {
	 padding: 5px 5px;
     }
    </style>
  </head>
  <body>
    <nav>
      <div id='navigator' class='nav-wrapper'>
	<ul class='right'></ul>
      </div>
    </nav>
    <div id='codeview' class='swpfview'>
      <div id='codecnt'></div>
      <div id='asmcnt'></div>
    </div>
    <div id='counterview' class='swpfview'>
    </div>
    <div id='funcview' class='swpfview'>
    </div>
    <div id='srcview' class='swpfview'>
    </div>
    <script>
     console.log(d3.select('#navigator'));
     init_navigator(d3.select('#navigator'));
     
     var dataframes;
     var selected_counters = [['CNT_PIPE1_INST', 'AVG'], ['CNT_PIPE1_INST', '0']];
     fetch('postprocessed.json')
       .then(r => r.json())
       .then(frames => {
	 dataframes = frames;
	 transform_dbg_frame(frames);
	 split_cu_frame(frames);
	 refresh_code_view(d3.select('#codecnt'), frames, null, selected_counters);
	 refresh_asm_view(d3.select('#asmcnt'), frames, selected_counters);
	 refresh_sym_view(d3.select('#funcview'), frames, selected_counters);
	 init_counters_view(d3.select('#counterview'), frames);
	 init_src_view(d3.select('#srcview'), frames);
	 switch_view('funcview');
       });
    </script>
  </body>
</html>
